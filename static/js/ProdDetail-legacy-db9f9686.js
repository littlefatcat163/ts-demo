!function(){var e=document.createElement("style");e.innerHTML=".header[data-v-48fd6469]{padding:18px 24px}.header>.image[data-v-48fd6469],.header>.skeleton-item-img[data-v-48fd6469]{width:96px;margin-right:8px}.header h2[data-v-48fd6469]{color:#0072e4;margin:0}.aside-item[data-v-48fd6469]{padding:18px 24px;position:relative}.aside-item>header[data-v-48fd6469]{margin:0 0 10px}.aside-item[data-v-48fd6469]:nth-child(even){background-color:#ececec}.aside-item:nth-child(even) .amount button[data-v-48fd6469]{background-color:#fff}.aside-item>.tag[data-v-48fd6469]{margin:0 8px 8px 0}.aside-item>.btn-primary[data-v-48fd6469]{background-color:#0072e4}.aside-item[data-v-48fd6469] .circle-effect-wrapper{position:absolute;right:24px;bottom:18px}.prod-spec-skeleton .aside-item[data-v-48fd6469]:nth-child(even){background-color:transparent}.prod-detail[data-v-3d463df1]{background-color:#fff;text-align:center;padding:24px 0 40px}.prod-detail>p[data-v-3d463df1]{margin-top:-.87em;color:#888;font-size:14px}.prod-detail .carousel[data-v-3d463df1],.prod-detail .skeleton-item-img[data-v-3d463df1]{margin:28px 0 24px}.prod-label[data-v-3d463df1]{font-size:24px}.prod-label>span[data-v-3d463df1]{margin-right:28px}.prod-label .skeleton-item[data-v-3d463df1]{display:inline-block;width:100px;height:24px}.prod-label .skeleton-item[data-v-3d463df1]:not(:last-child){margin-right:28px}.prod-buy-btns>button[data-v-3d463df1]{width:138px}.prod-buy-btns>button[data-v-3d463df1]:not(:last-child){margin-right:28px}.info-list[data-v-3d463df1]{margin:8px 0}\n",document.head.appendChild(e),System.register(["./index-legacy-d7783164.js","./index-legacy-17f054c1.js","./useUpdateTitle-legacy-b7c2a03d.js","./vendor-legacy-063e0170.js"],(function(e){"use strict";var t,a,u,n,o,r,d,i,l,c,s,V,p,f,m,h,g,x,v,w;return{setters:[function(e){t=e.S,a=e.F,u=e.g,n=e.E,o=e.B,r=e.e,d=e.T,i=e.A,l=e.C,c=e.P,s=e.h,V=e.w,p=e.u,f=e.i,m=e.j,h=e.p},function(e){g=e.W,x=e.L,v=e.b},function(e){w=e.u},function(){}],execute:function(){const y="IWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IGU9TnVtYmVyLnBhcnNlSW50KCIxODAwMDAwIik7bGV0IHQ7ZnVuY3Rpb24gbihuKXt0fHwodD1uZXcgTWFwKTtjb25zdHttb2RlOmEsa2V5Om8sY3JlYXRlVGltZTpyLGRhdGE6c309bjtpZigiZGVsZXRlIj09PWEpcmV0dXJuIHZvaWQgdC5kZWxldGUobyk7aWYoInB1dCI9PT1hKXJldHVybiB2b2lkIHQuc2V0KG8se2NyZWF0ZVRpbWU6cixkYXRhOnN9KTtjb25zdCBpPXQuZ2V0KG8pO2lmKG51bGwhPWkmJmZ1bmN0aW9uKGUsdCl7aWYoMD09PWUpcmV0dXJuITE7Y29uc3Qgbj1EYXRlLm5vdygpLWU7cmV0dXJuIG48PTB8fG4+PXR9KGkuY3JlYXRlVGltZSxlKSlyZXR1cm4gdC5kZWxldGUobyksdm9pZCBwb3N0TWVzc2FnZShudWxsKTtwb3N0TWVzc2FnZShudWxsPT1pP3ZvaWQgMDppLmRhdGEpfW9ubWVzc2FnZT1lPT57bihlLmRhdGEpfX0oKTsK",N="undefined"!=typeof window&&window.Blob&&new Blob([atob(y)],{type:"text/javascript;charset=utf-8"});function b(){const e=N&&(window.URL||window.webkitURL).createObjectURL(N);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+y,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const k=[];let C,E;function B(){null==E&&(E=k.shift(),null!=E&&C.postMessage(E.clientCache))}function P(e,t){var a;a={cb:e,clientCache:{key:t,mode:"get"}},C||(C=new b,C.onmessage=e=>{E.cb(e.data),E=void 0,B()}),k.push(a),B()}const R=axios.create({baseURL:"/x2s",timeout:12e3,headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}});R.interceptors.request.use((e=>{if(e.cache&&/get/i.test(e.method)){const t=axios.CancelToken.source();return e.cancelToken=t.token,new Promise((a=>{P((u=>{null!=u&&t.cancel(JSON.stringify(u)),a(e)}),e.url)}))}return e})),R.interceptors.response.use((e=>{const{status:t,config:a}=e;if(204===t)throw new Error("none");return a.cache&&/get/i.test(a.method)&&function(e,t,a=Date.now()){C.postMessage({key:e,data:t,createTime:a,mode:"put"})}(a.url,e.data),e}),(e=>{if(axios.isCancel(e)){const t={status:307,statusText:"cache",data:JSON.parse(e.message),headers:null,config:{}};return Promise.resolve(t)}return Promise.reject(e)}));const T={product:{name:"圣凯特红葡萄酒",remark:"法国罗纳河谷15度村庄级AOC进口原装红酒",price:198,id:"610a3ca656ac45df22dab7f0"},specifications:[{name:"750ml/支",price:198,inventory:100,id:"61245eada579fd79d0a4fa4f"},{name:"6支/箱",price:978,inventory:100,id:"61245eada579fd79d0a4fa50"}],infos:[]};var S={list:e=>R.post("/product/list",e),findProduct:e=>(console.log(e),new Promise((e=>{setTimeout((()=>{e({data:T})}),1e3)})))};function W(){const e=Vue.reactive({loading:!0,product:null,specifications:[],infos:[],patterns:[],errMsg:null});return{qryResult:e,queryDetail:async t=>{e.loading=!0,e.errMsg=null;try{const{data:{product:a,specifications:u,infos:n=[],patterns:o=[]}}=await S.findProduct(t);Object.assign(e,{product:a,specifications:u,infos:n,patterns:o})}catch(a){console.log(a),e.errMsg="errMsg"}finally{e.loading=!1}}}}Vue.pushScopeId("data-v-48fd6469");const _={class:"prod-spec-skeleton"},Z={class:"aside-item"},I={class:"aside-item"},G={class:"aside-item"},j=Vue.createTextVNode("重新加载"),L={key:1},D=Vue.createElementVNode("header",null,"规格",-1),U={class:"aside-item"},K=Vue.createElementVNode("header",null,"数量",-1),M={class:"aside-item"},X=Vue.createTextVNode("确定");Vue.popScopeId();var z=Vue.defineComponent({props:{id:{type:String,required:!0}},emits:["confirm"],setup(e,{emit:s}){const V=e,p=Vue.ref(1),{qryResult:f,queryDetail:m}=W(),h=Vue.ref(0),g=Vue.computed((()=>f.specifications[h.value])),x=Vue.computed((()=>g.value.price*p.value)),v=()=>{const e={product:Vue.toRaw(f.product),specification:Vue.toRaw(g.value),buyNum:p.value,cost:x.value};s("confirm",e)},w=e=>{const t=e.target;/span/i.test(t.tagName)&&(h.value=Number.parseInt(t.dataset.index))};Vue.onMounted((()=>{m(V.id)}));const y=()=>{m(V.id)};return(e,s)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(t),{loading:Vue.unref(f).loading},{template:Vue.withCtx((()=>[Vue.createElementVNode("section",_,[Vue.createVNode(Vue.unref(a),{tag:"header",class:"header"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(u),{tag:"img",style:{width:"96px",height:"96px"}}),Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(u),{tag:"h2",style:{width:"88px"}}),Vue.createVNode(Vue.unref(u),{tag:"p",style:{width:"128px"}})])])),_:1}),Vue.createElementVNode("aside",Z,[Vue.createVNode(Vue.unref(u),{tag:"header",style:{width:"48px"}}),Vue.createVNode(Vue.unref(u),{style:{width:"128px",height:"24px"}})]),Vue.createElementVNode("aside",I,[Vue.createVNode(Vue.unref(u),{tag:"header",style:{width:"48px"}}),Vue.createVNode(Vue.unref(u),{tag:"span",class:"tag tag-normal",style:{width:"128px"}})]),Vue.createElementVNode("div",G,[Vue.createVNode(Vue.unref(u),{tag:"button",class:"btn-primary btn-normal btn-block"})])])])),default:Vue.withCtx((()=>[Vue.unref(f).errMsg?(Vue.openBlock(),Vue.createBlock(Vue.unref(n),{key:0},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(o),{type:"primary",onClick:Vue.withModifiers(y,["stop"])},{default:Vue.withCtx((()=>[j])),_:1},8,["onClick"])])),_:1})):(Vue.openBlock(),Vue.createElementBlock("article",L,[Vue.createVNode(Vue.unref(a),{tag:"header",class:"header"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(r),{width:"96px",alt:"product",asset:Vue.unref(f).product?.id,assetPath:Vue.unref(g).id,assetSize:"mini"},null,8,["asset","assetPath"]),Vue.createElementVNode("div",null,[Vue.createElementVNode("h2",null,"¥ "+Vue.toDisplayString(Vue.unref(g).price),1),Vue.createElementVNode("p",null,Vue.toDisplayString(Vue.unref(f).product?.name),1)])])),_:1}),Vue.createElementVNode("aside",{class:"aside-item",onClick:w},[D,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(f).specifications,((e,t)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(d),{key:e.id,type:t===h.value?"primary":"info","data-index":t,size:"small"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.name),1)])),_:2},1032,["type","data-index"])))),128))]),Vue.createElementVNode("aside",U,[K,Vue.createVNode(Vue.unref(i),{value:p.value,"onUpdate:value":s[0]||(s[0]=e=>p.value=e),theme:null==Vue.unref(f).patterns?"default":"white"},null,8,["value","theme"]),Vue.createVNode(Vue.unref(l),{offset:[30,-68],level:Vue.unref(x)>200?1:0},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(c),{size:"large",fee:Vue.unref(x)},null,8,["fee"])])),_:1},8,["level"])]),Vue.createElementVNode("div",M,[Vue.createVNode(Vue.unref(o),{block:"",type:"primary",onClick:v},{default:Vue.withCtx((()=>[X])),_:1})])]))])),_:1},8,["loading"]))}});z.__scopeId="data-v-48fd6469";const O=Vue.defineComponent({name:"ChooseProductSpecificationPopup"});var Y=Vue.defineComponent({...O,setup:function(e,{expose:t}){const{openPopup:a,closePopup:u,show:n}=function(){const e=Vue.ref(!1);let t,a;return{show:e,openPopup:(u,n)=>{t=u,a=n,e.value=!0},closePopup:(u=!0,n)=>{t&&a&&(e.value=!1,u?t(n):a(n),t=null,a=null)}}}(),o=Vue.ref(""),r=e=>{u(!0,e)},d=()=>{u(!1)};return t({chooseProductSpec:e=>(o.value=e,new Promise(((e,t)=>{a(e,t)})))}),(e,t)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(s),{show:Vue.unref(n),"onUpdate:show":t[0]||(t[0]=e=>Vue.isRef(n)?n.value=e:null),onClose:d},{default:Vue.withCtx((()=>[Vue.createVNode(z,{id:o.value,onConfirm:r},null,8,["id"])])),_:1},8,["show"]))}}),J=V(Y);Vue.pushScopeId("data-v-3d463df1");const F=Vue.createTextVNode("点击刷新"),q={class:"prod-detail"},H={class:"prod-label"},Q={class:"prod-buy-btns"},A={class:"prod-detail"},$={class:"prod-label"},ee={href:"#"},te={class:"prod-buy-btns"},ae=Vue.createTextVNode("加入购物袋"),ue=Vue.createTextVNode("立即购买"),ne={class:"info-list"};Vue.popScopeId();e("default",Vue.defineComponent({setup(e){w("");const a="xxxxxxxxxxxxx",{qryResult:d,queryDetail:i}=W(),l=Vue.ref(),c=Vue.ref();let s;const V=Vue.computed((()=>d.specifications[0])),y=e=>{let t=e.target;for(;!/li/i.test(t.tagName)&&null!=t;)t=t.parentElement;console.log(t.dataset.id)},N=()=>{l.value.chooseProductSpec(a).then((e=>{s||(s=c.value?.$el.getBoundingClientRect()),h(e,s)}))},{buyNow:b}=function(){const e=VueRouter.useRouter(),t=p();return{buyNow:a=>{t.buyNow(a),e.push("/shopping/bag/1")}}}(),k=()=>{l.value.chooseProductSpec(a).then((e=>{b(e)}))};Vue.onMounted((()=>{i(a)}));const C=()=>{i(a)};return(e,a)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(g),null,{default:Vue.withCtx((()=>[Vue.unref(d).errMsg?(Vue.openBlock(),Vue.createBlock(Vue.unref(n),{key:0},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(o),{type:"primary",onClick:C},{default:Vue.withCtx((()=>[F])),_:1})])),_:1})):(Vue.openBlock(),Vue.createBlock(Vue.unref(t),{key:1,loading:Vue.unref(d).loading},{template:Vue.withCtx((()=>[Vue.createElementVNode("div",q,[Vue.createVNode(Vue.unref(u),{tag:"h1"}),Vue.createVNode(Vue.unref(u),{tag:"p"}),Vue.createElementVNode("div",H,[Vue.createVNode(Vue.unref(u)),Vue.createVNode(Vue.unref(u))]),Vue.createVNode(Vue.unref(u),{tag:"img",style:{width:"100vw",height:"100vw"}}),Vue.createElementVNode("div",Q,[Vue.createVNode(Vue.unref(u),{tag:"button"}),Vue.createVNode(Vue.unref(u),{tag:"button"})])])])),default:Vue.withCtx((()=>[Vue.createElementVNode("article",A,[Vue.createElementVNode("h1",null,Vue.toDisplayString(Vue.unref(d).product?.name),1),Vue.createElementVNode("p",null,Vue.toDisplayString(Vue.unref(d).product?.remark),1),Vue.createElementVNode("div",$,[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(V).name),1),Vue.createElementVNode("a",ee,"¥ "+Vue.toDisplayString(Vue.unref(V).price),1)]),Vue.createVNode(Vue.unref(f),{ref:(e,t)=>{t.carouselRef=e,c.value=e}},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(d).specifications,(e=>(Vue.openBlock(),Vue.createBlock(Vue.unref(m),{key:e.id},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(r),{asset:Vue.unref(d).product?.id,assetPath:e.id,alt:"product-spec"},null,8,["asset","assetPath"])])),_:2},1024)))),128))])),_:1},512),Vue.createElementVNode("div",te,[Vue.createVNode(Vue.unref(o),{onClick:N},{default:Vue.withCtx((()=>[ae])),_:1}),Vue.createVNode(Vue.unref(o),{onClick:k,type:"primary"},{default:Vue.withCtx((()=>[ue])),_:1})])]),Vue.createElementVNode("nav",ne,[Vue.createVNode(Vue.unref(x),{onClick:y},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(d).infos,(e=>(Vue.openBlock(),Vue.createBlock(Vue.unref(v),{key:e.id,"data-id":e.id},{label:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.name),1)])),_:2},1032,["data-id"])))),128))])),_:1})])])),_:1},8,["loading"])),Vue.createVNode(Vue.unref(J),{ref:(e,t)=>{t.chooseproductSpecRef=e,l.value=e}},null,512)])),_:1}))}})).__scopeId="data-v-3d463df1"}}}))}();
